# skippy-core

This project contains functionality that is agnostic to build tools and testing frameworks:
- The Logic For Conditional Test Execution
- The Logic For Generation of Coverage Files

This project is not meant to be consumed directly by builds that want to utilize Skippy. Instead, builds 
should use the [skippy-junit4](../skippy-junit4/README.md) or [skippy-junit5](../skippy-junit5/README.md) 
libraries which transitively depend on skippy-core.

## Conditional Test Execution

This project contains the logic to make a skip-or-execute decision for a test based on
- the class files in the output folders and 
- the data in the skippy folder generated by [skippy-gradle](../skippy-gradle/README.md). 

Let's go over the scenarios that you might encounter during test execution.

Note: The verbose logging in the following examples is generated by setting the log level for `io.skippy` to `DEBUG`.

### No Change Detected

Skippy skips a test if neither the test nor a covered class have changed:
```
./gradlew test

DEBUG i.s.c.SkippyAnalysis - com.example.FooTest: No changes in test or covered classes detected: Execution skipped
FooTest > testFoo() SKIPPED
```

### No Coverage Data For Test

Skippy executes a test if it does not find coverage data for the test in the `skippy` folder:
```
./gradlew test

DEBUG i.s.c.SkippyAnalysis - com.example.FooTest: No coverage data found: Execution required
FooTest > testFoo() PASSED
```

### Bytecode Change In Test Detected

Skippy executes a tests if it detects a bytecode change in the test:
```
./gradlew test

DEBUG i.s.c.SkippyAnalysis - com.example.FooTest: Bytecode change detected: Execution required
FooTest > testFoo() PASSED
```

### No Hash For Test Found

Skippy executes a tests if it does not find a hash for the test in `skippy/classes.md5`:
```
./gradlew test

DEBUG i.s.c.SkippyAnalysis - com.example.FooTest: No hash found: Execution required
FooTest > testFoo() PASSED
```

### No Hash For Covered Class Found

Skippy executes a tests if it does not find a hash for a covered class in `skippy/classes.md5`:
```
./gradlew test

DEBUG i.s.c.SkippyAnalysis - com.example.FooTest: No hash for covered class 'com.example.Service' found: Execution required
FooTest > testFoo() PASSED
```

### Bytecode Change In Covered Class Detected

Skippy executes a tests if it detects a bytecode change in a covered class:
```
./gradlew test

DEBUG i.s.c.SkippyAnalysis - com.example.FooTest: Bytecode change in covered class 'com.example.Service' detected: Execution required
FooTest > testFoo() PASSED
```

## Generation Of Coverage Files

TODO: document